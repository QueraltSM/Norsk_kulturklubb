<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Lesson Â· Leksjon</title>
    <meta content="" name="description" />
    <meta content="" name="keywords" />
    <!-- Favicons -->
    <link href="/assets/img/favicon.png" rel="icon" />
    <link href="/assets/img/apple-touch-icon.png" rel="apple-touch-icon" />
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
        rel="stylesheet" />
    <!-- Vendor CSS Files -->
    <link href="/assets/vendor/animate.css/animate.min.css" rel="stylesheet" />
    <link href="/assets/vendor/aos/aos.css" rel="stylesheet" />
    <link href="/assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <link href="/assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet" />
    <link href="/assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet" />
    <link href="/assets/vendor/remixicon/remixicon.css" rel="stylesheet" />
    <link href="/assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet" />
    <!-- Template Main CSS File -->
    <link href="/assets/css/style.css" rel="stylesheet" />
</head>

<body>
    <video controls width="100%" height="auto" id="lesson_video_viewer" style="display:none"></video>
    <iframe id="lesson_document_viewer" style="width:100%; height:100vh; display:none" frameborder="0"></iframe>
    <!-- Vendor JS Files -->
    <script src="/assets/vendor/purecounter/purecounter_vanilla.js"></script>
    <script src="/assets/vendor/aos/aos.js"></script>
    <script src="/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="/assets/vendor/swiper/swiper-bundle.min.js"></script>
    <script src="/assets/vendor/php-email-form/validate.js"></script>
    <!-- Template Main JS File -->
    <script src="/assets/js/main.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
 document.addEventListener("DOMContentLoaded", function () {
    var url = new URL(window.location.href).pathname.split('/')[3];
    alert(url);
    async function fetchData() {
        try {
            const response = await fetch("/api/getFromURL?url_link=" + url + "&table=Lessons");
            if (!response.ok) {
                throw new Error("Failed to get server response.");
            }
            const lesson = await response.json();
            const extension = lesson.content_url.split(".").pop().toLowerCase();
            alert(extension);
            if (extension === "mp4") {
                const videoUrl = lesson.content_url;
                const videoViewer = document.getElementById("lesson_video_viewer");
                videoViewer.style.display = "block";
                videoViewer.src = videoUrl;
            } else if (extension === "pdf" || extension === "docx" || extension === "pptx" || extension === "txt") {
                const googleDocsUrl = "https://docs.google.com/gview?url=" + lesson.content_url + "&embedded=true";
                const documentViewer = document.getElementById("lesson_document_viewer");
                documentViewer.style.display = "block";
                documentViewer.src = googleDocsUrl;
                alert(googleDocsUrl);
            }
        } catch (error) {
            //window.location.href = "/404.html";
        }
    }
    fetchData();
});

    </script>
</body>
</html>