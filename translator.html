<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />

  <title>Norsk Kulturklubb · Translator</title>
  <meta content="" name="description" />
  <meta content="" name="keywords" />

  <!-- Favicons -->
  <link href="assets/img/favicon.png" rel="icon" />
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon" />

  <!-- Google Fonts -->
  <link
    href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
    rel="stylesheet" />

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/animate.css/animate.min.css" rel="stylesheet" />
  <link href="assets/vendor/aos/aos.css" rel="stylesheet" />
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet" />
  <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet" />
  <link href="assets/vendor/remixicon/remixicon.css" rel="stylesheet" />
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet" />
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet" />

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />

  <!-- Agregar VKB -->

  <!-- Template Main CSS File -->
  <link href="assets/css/style.css" rel="stylesheet" />

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/simple-keyboard@latest/build/css/index.css">


  <!-- =======================================================
  * Template Name: Mentor
  * Updated: Jan 29 2024 with Bootstrap v5.3.2
  * Template URL: https://bootstrapmade.com/mentor-free-education-bootstrap-theme/
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
</head>

<style></style>

<body>
  <!-- ======= Header ======= -->
  <header id="header"></header>


  <!-- End Header -->
  <main id="main" data-aos="fade-in">
    <!-- ======= translator Section ======= -->
    <section id="translator" class="translator">
      <div class="container">

        <div class="section-title" style="padding-bottom: 0px">
          <h2>Oversetter</h2>
          <p>Translator</p>
        </div>
        <div>
          <form id="translationForm" class="needs-validation translator-form" novalidate>
            <div class="form-row">
              <div class="col">
                <ul class="nav nav-tabs" id="languageTabs_totranslate" style="border:none">
                  <li class="nav-item">
                    <a class="nav-link active" id="automaticDetection" data-toggle="tab">Automatic detection</a>
                  </li>
                </ul>
                <div class="d-flex align-items-start"
                  style="border: 0.5px solid lightgray;border-radius: 5px;margin-top:1px">
                  <div class="d-flex align-items-start">
                    <textarea class="form-control auto-height-textarea" id="text" style="min-height: 300px"
                      required></textarea>
                    <a title="Active keyboard" class="translator-buttons" type="button" id="activeKeyboard"
                      style="color:#9C3030; position: absolute; bottom: 0; right: 0;padding:20px;">
                      <i class="fas fa-keyboard"></i>
                    </a>
                  </div>
                </div>
              </div>
              <div class="col">
                <ul class="nav nav-tabs" id="languageTabs_translated" style="border:none">
                  <li class="nav-item">
                    <a class="nav-link" id="english_tab" data-toggle="tab" href="#englishText">English</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link active" id="norweigan_tab" data-toggle="tab" href="#norwegianText">Norsk</a>
                  </li>

                  <li class="nav-item dropdown" id="otherLanguageDropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="others_tab" role="button" aria-haspopup="true"
                      aria-expanded="false">
                      Others
                    </a>
                    <div id="dropdown-menu-item" class="dropdown-menu" style="display: none;">
                      <ul style="list-style: none;font-size: 13px;columns: 3" class="centered-text">
                        <li data-code="es">Español</li>
                        <li data-code="fr">Français</li>
                        <li data-code="de">Deutsch</li>
                        <li data-code="it">Italiano</li>
                        <li data-code="pt">Português</li>
                        <li data-code="nl">Nederlands</li>
                        <li data-code="pl">Polski</li>
                        <li data-code="ru">Русский</li>
                        <li data-code="zh">中文(简体)</li>
                        <li data-code="zh-TW">中文(繁體)</li>
                        <li data-code="ja">日本語</li>
                        <li data-code="ko">한국어</li>
                        <li data-code="ar">العربية</li>
                        <li data-code="tr">Türkçe</li>
                        <li data-code="hi">हिन्दी</li>
                        <li data-code="sv">Svenska</li>
                        <li data-code="da">Dansk</li>
                        <li data-code="fi">Suomi</li>
                        <li data-code="he">עברית</li>
                        <li data-code="el">Ελληνικά</li>
                        <li data-code="id">Bahasa Indonesia</li>
                      </ul>
                    </div>
                  </li>
                </ul>
                <div class="form-group d-flex flex-column-reverse" style="border: none;margin-top: 1px;">
                  <div class="d-flex align-items-start" style="background-color: #f5f5f5; position: relative;">
                    <textarea class="form-control auto-height-textarea" id="translated_text"
                      style="min-height: 300px; margin-top: 1px; background-color: #f5f5f5;" readonly></textarea>
                    <a title="Copy text" class="translator-buttons" type="button" id="copyButton"
                      style="color:#9C3030; position: absolute; bottom: 0; right: 0;padding:10px;">
                      <i class="fas fa-copy"></i>
                    </a>
                    <div id="copyMessageContainer" class="fixed-bottom w-100 d-flex justify-content-center"></div>
                  </div>
                </div>
              </div>
            </div>
            <br>
            <div id="keyboard_container" style="display: none;">
              <div class="section-title" style="padding-bottom: 0px">
                <h2>Tastatur</h2>
                <p>Keyboard</p>
              </div>
              <div style="background:#f5f5f5">
                <li class="nav-item dropdown" id="otherLanguageDropdownKeyboard"
                  style="list-style: none;float:right;color:#9C3030;">
                  <a class="nav-link dropdown-toggle" href="#" id="keyboard_language" role="button" aria-haspopup="true"
                    aria-expanded="false">
                    <strong>Language</strong>
                  </a>
                  <div id="dropdown-menu-item-keyboard" class="dropdown-menu" style="display: none;">
                    <ul style="list-style: none;font-size: 13px;columns: 3;" class="centered-text">
                      <li data-code="no">Norweigan</li>
                      <li data-code="en">English</li>
                      <li data-code="es">Español</li>
                      <li data-code="fr">Français</li>
                      <li data-code="de">Deutsch</li>
                      <li data-code="it">Italiano</li>
                      <li data-code="pt">Português</li>
                      <li data-code="nl">Nederlands</li>
                      <li data-code="pl">Polski</li>
                      <li data-code="ru">Русский</li>
                      <li data-code="zh">中文(简体)</li>
                      <li data-code="zh-TW">中文(繁體)</li>
                      <li data-code="ja">日本語</li>
                      <li data-code="ko">한국어</li>
                      <li data-code="ar">العربية</li>
                      <li data-code="tr">Türkçe</li>
                      <li data-code="hi">हिन्दी</li>
                      <li data-code="sv">Svenska</li>
                      <li data-code="da">Dansk</li>
                      <li data-code="fi">Suomi</li>
                      <li data-code="he">עברית</li>
                      <li data-code="el">Ελληνικά</li>
                      <li data-code="id">Bahasa Indonesia</li>
                    </ul>
                  </div>
                </li>
                <div class="simple-keyboard"></div><br>
              </div>
              <br>
            </div>
            <div class="text-center">
              <a id="translate" style="cursor: pointer" class="get-started-btn" onclick="translate();">Translate</a>
            </div>
          </form>
        </div>
      </div>
    </section>
  </main>
  <!-- End #main -->

  <!-- ======= Footer ======= -->
  <footer id="footer"></footer>
  <!-- End Footer -->

  <!-- Vendor JS Files -->
  <script src="assets/vendor/purecounter/purecounter_vanilla.js"></script>
  <script src="assets/vendor/aos/aos.js"></script>
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>

  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

  <!-- Template Main JS File -->
  <script src="assets/js/main.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  <script src="assets/js/translator.js"></script>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/virtual-keyboard/dist/js/jquery.keyboard.min.js"></script>


  <script>
    $(document).ready(function () {
      $("#header").load("header.html");
      $("#footer").load("footer.html");
    });
  </script>

  <script src="https://cdn.jsdelivr.net/npm/simple-keyboard@latest/build/index.js"></script>

  <script>
    const Keyboard = window.SimpleKeyboard.default;

    const myKeyboard = new Keyboard({
      onChange: input => onChange(input),
      onKeyPress: button => onKeyPress(button),

    });

    function onChange(input) {
      document.querySelector(".input").value = input;
    }

    function onKeyPress(button) {
      document.getElementById("text").innerHTML += button;
    }

    function changeLanguage(languageCode) {
      switch (languageCode) {
        case "no":
          myKeyboard.setOptions({
            layout: {
              default: [
                "q w e r t y u i o p",
                "a s d f g h j k l",
                "{shift} z x c v b n m {backspace}",
                "{space} {enter}"
              ],
              shift: [
                "Q W E R T Y U I O P",
                "A S D F G H J K L",
                "{shiftactivated} Z X C V B N M {backspace}",
                "{space} {enter}"
              ],
            }
          });
          break;
        case "fr":
          break;

        default:
          break;
      }
    }
  </script>

  <script>
    document.getElementById('otherLanguageDropdown').addEventListener('click', function () {
      var dropdownMenu = document.getElementById('dropdown-menu-item');
      if (dropdownMenu.style.display === 'none' || dropdownMenu.style.display === '') {
        dropdownMenu.style.display = 'block';
      } else {
        dropdownMenu.style.display = 'none';
      }
    });

    document.getElementById('otherLanguageDropdownKeyboard').addEventListener('click', function () {
      var dropdownMenu = document.getElementById('dropdown-menu-item-keyboard');
      if (dropdownMenu.style.display === 'none' || dropdownMenu.style.display === '') {
        dropdownMenu.style.display = 'block';
      } else {
        dropdownMenu.style.display = 'none';
      }
    });

    document.getElementById('activeKeyboard').addEventListener('click', function () {
      var keyboardContainer = document.getElementById("keyboard_container");
      if (keyboardContainer.style.display === "block" || keyboardContainer.style.display === "") {
        keyboardContainer.style.display = "none";
        document.getElementById('activeKeyboard').title = "Active keyboard";
      } else {
        keyboardContainer.style.display = "block";
        document.getElementById('activeKeyboard').title = "Disable keyboard";
      }
    });

    document.querySelectorAll('#dropdown-menu-item li').forEach(item => {
      item.addEventListener('click', event => {
        const selectedLanguage = event.target.textContent;
        document.getElementById('others_tab').textContent = selectedLanguage;
        localStorage.setItem("selected_language", event.target.getAttribute('data-code'))
        document.getElementById('others_tab').classList.add('active');
        document.getElementById('english_tab').classList.remove('active');
        document.getElementById('norweigan_tab').classList.remove('active');
      });
    });


    document.querySelectorAll('#dropdown-menu-item-keyboard li').forEach(item => {
      item.addEventListener('click', event => {
        const selectedLanguage = event.target.textContent;
        document.getElementById('keyboard_language').textContent = selectedLanguage;
        changeLanguage(event.target.getAttribute('data-code'));

      });
    });

    document.addEventListener('click', function (event) {
      var dropdownMenu = document.getElementById('dropdown-menu-item');
      var isClickInsideDropdown = otherLanguageDropdown.contains(event.target);
      var isClickOnDropdownMenu = dropdownMenu.contains(event.target);
      if (!isClickInsideDropdown && !isClickOnDropdownMenu) {
        dropdownMenu.style.display = 'none';
      }
    });

    document.addEventListener("DOMContentLoaded", function () {
      document
        .getElementById("copyButton")
        .addEventListener("click", function () {
          var translatedText =
            document.getElementById("translatedText").value;
          var tempInput = document.createElement("textarea");
          tempInput.value = translatedText;
          document.body.appendChild(tempInput);
          tempInput.select();
          tempInput.setSelectionRange(0, 99999);
          document.execCommand("copy");
          document.body.removeChild(tempInput);
          var alertMessage = document.createElement("div");
          alertMessage.classList.add(
            "alert",
            "alert-success",
            "mt-3",
            "p-2",
            "text-center"
          );
          alertMessage.innerHTML = "Text copied to clipboard";
          document
            .getElementById("copyMessageContainer")
            .appendChild(alertMessage);
          setTimeout(function () {
            alertMessage.style.display = "none";
          }, 3000);
        });
    });
    document
      .getElementById("text")
      .addEventListener("input", function () {
        adjustTextareaHeight();
      });
    adjustTextareaHeight();

    function adjustTextareaHeight() {
      var textarea = document.getElementById("text");
      textarea.style.height = "auto";
      textarea.style.height = textarea.scrollHeight + "px";
    }

    function translate() {
      var english_tab = document.getElementById("english_tab").classList.contains('active');
      var norweigan_tab = document.getElementById("norweigan_tab").classList.contains('active');
      var others_tab = document.getElementById("others_tab").classList.contains('active');
      var target_language = "";
      if (english_tab) {
        target_language = "en";
      } else if (norweigan_tab) {
        target_language = "no";
      } else if (others_tab) {
        target_language = localStorage.getItem("selected_language");
      }
      var source_language = "";
      const text = document.getElementById("text").value;
      fetch(`http://localhost:3000/api/detectLanguage?text=${encodeURIComponent(text)}`)
        .then(response => {
          if (!response.ok) {
            throw new Error('No se pudo realizar la solicitud al servidor');
          }
          return response.json();
        })
        .then(data => {
          source_language = data.detectedLanguage;
          fetch(`http://localhost:3000/api/translateText?text=${text}&SourceLanguageCode=${source_language}&TargetLanguageCode=${target_language}`)
            .then(response => response.json())
            .then(data => {
              document.getElementById("translated_text").innerText = data.translatedText;
            })
            .catch(error => {
              document.getElementById("translated_text").innerText = 'Error';
            });
        })
        .catch(error => {
          alert('Error:' + error);
        });
    }
  </script>
</body>
</html>